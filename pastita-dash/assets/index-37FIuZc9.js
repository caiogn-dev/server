import{j as e}from"./vendor-charts-o9Lo7m6Z.js";import{e as V,u as K,r as n}from"./vendor-react-C2HNIXra.js";import{d as W,l as z,R as m,s as A,X as c,a5 as q,q as R,a6 as I,t as G,j as B,x as Y,z as ee,a4 as j,ah as O,b9 as ae,ba as te,aj as se,bb as re,bc as le,af as ne,aZ as ie,ag as oe,E as ce,aO as de}from"./feature-automation-CLWK1V5x.js";import"./index-DQDVHdIA.js";import{m as N}from"./marketingService-D9ImcE5m.js";import"./vendor-utils-DaXQUBrP.js";import"./vendor-ui-B9rDAafI.js";import"./vendor-mui-DKuE-Kg_.js";const L=({title:s,value:o,subtitle:g,icon:p,color:i,trend:l})=>e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:s}),e.jsx("p",{className:`text-3xl font-bold ${i} mt-1`,children:o}),g&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:g}),l!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 mt-2 text-sm ${l>=0?"text-green-600":"text-red-600"}`,children:[e.jsx(ae,{className:`w-4 h-4 ${l<0?"rotate-180":""}`}),e.jsxs("span",{children:[Math.abs(l),"% vs mÃªs anterior"]})]})]}),e.jsx("div",{className:`p-3 rounded-xl ${i.replace("text-","bg-").replace("600","100")}`,children:e.jsx(p,{className:`w-6 h-6 ${i}`})})]})}),xe=({template:s,onPreview:o,onUse:g})=>{const p={coupon:"bg-green-100 text-green-700",welcome:"bg-blue-100 text-blue-700",promotional:"bg-orange-100 text-orange-700",order_confirmation:"bg-purple-100 text-purple-700",abandoned_cart:"bg-yellow-100 text-yellow-700",newsletter:"bg-pink-100 text-pink-700",transactional:"bg-gray-100 text-gray-700",custom:"bg-gray-100 text-gray-700"},i={coupon:"ðŸŽ Cupom",welcome:"ðŸ‘‹ Boas-vindas",promotional:"ðŸ”¥ PromoÃ§Ã£o",order_confirmation:"âœ… ConfirmaÃ§Ã£o",abandoned_cart:"ðŸ›’ Carrinho",newsletter:"ðŸ“° Newsletter",transactional:"ðŸ“§ Transacional",custom:"âœï¸ Personalizado"};return e.jsxs(j,{className:"overflow-hidden hover:shadow-lg transition-shadow group",children:[e.jsxs("div",{className:"h-40 bg-gradient-to-br from-gray-100 to-gray-200 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 scale-[0.3] origin-top-left pointer-events-none",dangerouslySetInnerHTML:{__html:s.html_content.slice(0,2e3)}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white/80 to-transparent"}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:o,className:"p-2 bg-white dark:bg-zinc-900 rounded-full hover:bg-gray-100 dark:hover:bg-zinc-700 dark:hover:bg-zinc-700",title:"Visualizar",children:e.jsx(te,{className:"w-5 h-5 text-gray-700 dark:text-zinc-300"})}),e.jsx("button",{onClick:g,className:"p-2 bg-primary-500 rounded-full hover:bg-primary-600",title:"Usar Template",children:e.jsx(se,{className:"w-5 h-5 text-white"})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${p[s.template_type]}`,children:i[s.template_type]})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 line-clamp-1",children:s.subject}),s.variables.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[s.variables.slice(0,3).map(l=>e.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-zinc-400 px-1.5 py-0.5 rounded",children:`{{${l}}}`},l)),s.variables.length>3&&e.jsxs("span",{className:"text-xs text-gray-400",children:["+",s.variables.length-3]})]})]})]})},T=({title:s,description:o,icon:g,color:p,onClick:i})=>e.jsxs("button",{onClick:i,className:"flex items-start gap-4 p-4 bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 hover:border-primary-300 hover:shadow-md transition-all text-left w-full",children:[e.jsx("div",{className:`p-3 rounded-xl ${p}`,children:e.jsx(g,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:s}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:o})]})]}),ye=()=>{const s=V(),{storeId:o}=K(),{storeId:g,storeName:p}=W(),i=o||g,[l,b]=n.useState(!0),[d,P]=n.useState(null),[k,M]=n.useState([]),[S,v]=n.useState([]),[f,y]=n.useState(null),h=n.useCallback(async()=>{if(!i){b(!1);return}try{b(!0);const[r,E,C]=await Promise.all([N.stats.get(i),N.emailTemplates.list(i),N.emailCampaigns.list(i)]);P(r),M(E),v(C.slice(0,5))}catch(r){z.error("Error loading marketing data:",r),m.error("Erro ao carregar dados de marketing")}finally{b(!1)}},[i]);n.useEffect(()=>{h()},[h]);const w=r=>{s(`/marketing/email/new?template=${r.slug}`)};return i?l?e.jsx(q,{}):e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Marketing"}),e.jsx("p",{className:"text-gray-500 dark:text-zinc-400",children:p?`Campanhas e promoÃ§Ãµes de ${p}`:"Gerencie suas campanhas de marketing"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{variant:"secondary",onClick:()=>s("/marketing/subscribers"),children:[e.jsx(R,{className:"w-5 h-5 mr-2"}),"Contatos"]}),e.jsxs(c,{onClick:()=>s("/marketing/email/new"),children:[e.jsx(I,{className:"w-5 h-5 mr-2"}),"Nova Campanha"]})]})]}),d&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(L,{title:"Emails Enviados",value:d.email.total_sent.toLocaleString(),subtitle:`${d.email.open_rate.toFixed(1)}% taxa de abertura`,icon:G,color:"text-blue-600 dark:text-blue-400"}),e.jsx(L,{title:"WhatsApp Enviados",value:d.whatsapp.total_sent.toLocaleString(),subtitle:`${d.whatsapp.read_rate.toFixed(1)}% taxa de leitura`,icon:B,color:"text-green-600 dark:text-green-400"}),e.jsx(L,{title:"Campanhas Ativas",value:d.email.total_campaigns+d.whatsapp.total_campaigns,subtitle:"Email + WhatsApp",icon:A,color:"text-purple-600 dark:text-purple-400"}),e.jsx(L,{title:"Inscritos",value:d.subscribers.total.toLocaleString(),subtitle:`+${d.subscribers.new_this_month} este mÃªs`,icon:R,color:"text-orange-600"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"AÃ§Ãµes RÃ¡pidas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(T,{title:"Enviar Cupom",description:"Crie e envie cupons de desconto",icon:Y,color:"bg-gradient-to-br from-green-500 to-emerald-600",onClick:()=>s("/marketing/email/new?template=coupon")}),e.jsx(T,{title:"PromoÃ§Ã£o RelÃ¢mpago",description:"Anuncie ofertas por tempo limitado",icon:A,color:"bg-gradient-to-br from-orange-500 to-red-500",onClick:()=>s("/marketing/email/new?template=promotion")}),e.jsx(T,{title:"Recuperar Carrinhos",description:"Reengaje clientes que abandonaram",icon:ee,color:"bg-gradient-to-br from-yellow-500 to-amber-600",onClick:()=>s("/marketing/email/new?template=abandoned_cart")}),e.jsx(T,{title:"WhatsApp em Massa",description:"Envie mensagens para sua base",icon:B,color:"bg-gradient-to-br from-green-600 to-teal-600",onClick:()=>s("/marketing/whatsapp/new")})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Templates de Email"}),e.jsx(c,{variant:"secondary",size:"sm",onClick:()=>s("/marketing/email/templates"),children:"Ver Todos"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:k.slice(0,4).map(r=>e.jsx(xe,{template:r,onPreview:()=>y(r),onUse:()=>w(r)},r.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Campanhas Recentes"}),e.jsxs(c,{variant:"secondary",size:"sm",onClick:()=>s("/marketing/email"),children:["Ver Todas (",S.length||d?.email?.total_campaigns||0,")"]})]}),S.length>0?e.jsx("div",{className:"space-y-3",children:S.map(r=>e.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg border border-gray-200 dark:border-zinc-800 p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>s("/marketing/email"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:r.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate",children:r.subject})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.status==="sent"?"bg-green-100 text-green-700":r.status==="draft"?"bg-gray-100 text-gray-700":r.status==="sending"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:r.status==="sent"?"Enviada":r.status==="draft"?"Rascunho":r.status==="sending"?"Enviando":r.status}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:[r.emails_sent||0," enviados"]})]})]})},r.id))}):e.jsxs(j,{className:"p-8 text-center",children:[e.jsx(A,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-zinc-400 mb-4",children:"Nenhuma campanha criada ainda"}),e.jsxs(c,{onClick:()=>s("/marketing/email/new"),children:[e.jsx(I,{className:"w-5 h-5 mr-2"}),"Criar Primeira Campanha"]})]})]}),e.jsx(O,{isOpen:!!f,onClose:()=>y(null),title:f?.name||"Preview",size:"xl",children:f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-black rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Assunto:"}),e.jsx("p",{className:"font-medium",children:f.subject})]}),e.jsx(c,{onClick:()=>{w(f),y(null)},children:"Usar Template"})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",style:{height:"500px"},children:e.jsx("iframe",{srcDoc:f.html_content,className:"w-full h-full",title:"Email Preview"})})]})})]}):e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhuma loja selecionada"}),e.jsx("p",{className:"text-gray-500 dark:text-zinc-400 mb-4",children:"Selecione uma loja para acessar o marketing."}),e.jsx(c,{onClick:()=>s("/stores"),children:"Ver Lojas"})]})},Ne=()=>{const s=V(),{storeId:o,storeName:g}=W(),[p,i]=n.useState(!0),[l,b]=n.useState([]),[d,P]=n.useState(""),[k,M]=n.useState("all"),[S,v]=n.useState(!1),[f,y]=n.useState(!1),[h,w]=n.useState({email:"",name:"",phone:"",tags:[]}),[r,E]=n.useState(""),[C,F]=n.useState(!1);n.useEffect(()=>{(async()=>{if(!o){i(!1);return}try{i(!0);const t=await N.subscribers.list(o);b(t),z.info("Loaded customers",{count:t.length})}catch(t){z.error("Failed to load customers",t),m.error("Erro ao carregar contatos")}finally{i(!1)}})()},[o]);const D=n.useMemo(()=>{let a=l;if(k!=="all"&&(a=a.filter(t=>t.status===k)),d){const t=d.toLowerCase();a=a.filter(x=>x.email.toLowerCase().includes(t)||x.name.toLowerCase().includes(t)||x.phone?.toLowerCase().includes(t))}return a},[l,k,d]),_=n.useMemo(()=>({total:l.length,active:l.filter(a=>a.status==="active").length,withOrders:l.filter(a=>(a.total_orders||0)>0).length,unsubscribed:l.filter(a=>a.status==="unsubscribed").length}),[l]),H=async()=>{if(o){if(!h.email){m.error("Email Ã© obrigatÃ³rio");return}F(!0);try{const a=await N.subscribers.create({store:o,email:h.email,name:h.name,phone:h.phone,tags:h.tags,status:"active",accepts_marketing:!0});b(t=>[a,...t]),v(!1),w({email:"",name:"",phone:"",tags:[]}),m.success("Contato adicionado!")}catch(a){z.error("Failed to add subscriber",a),m.error("Erro ao adicionar contato")}finally{F(!1)}}},J=async()=>{if(o){if(!r.trim()){m.error("Cole os contatos para importar");return}F(!0);try{const t=r.trim().split(`
`).map(u=>{const U=u.split(",").map(Z=>Z.trim());return{email:U[0],name:U[1]||"",phone:U[2]||""}}).filter(u=>u.email&&u.email.includes("@"));if(t.length===0){m.error("Nenhum email vÃ¡lido encontrado");return}const x=await N.subscribers.importCsv(o,t),$=await N.subscribers.list(o);b($),y(!1),E(""),m.success(`Importados: ${x.created} novos, ${x.updated} atualizados`)}catch(a){z.error("Failed to import subscribers",a),m.error("Erro ao importar contatos")}finally{F(!1)}}},Q=()=>{const a=D.map(u=>`${u.email},${u.name},${u.phone||""},${u.status}`).join(`
`),t=new Blob([`email,name,phone,status
${a}`],{type:"text/csv"}),x=URL.createObjectURL(t),$=document.createElement("a");$.href=x,$.download=`subscribers-${g||"export"}.csv`,$.click(),URL.revokeObjectURL(x),m.success("ExportaÃ§Ã£o iniciada")},X=async a=>{try{await N.subscribers.unsubscribe(a.id),b(t=>t.map(x=>x.id===a.id?{...x,status:"unsubscribed"}:x)),m.success("Contato descadastrado")}catch(t){z.error("Failed to unsubscribe",t),m.error("Erro ao descadastrar")}};return o?p?e.jsx(q,{}):e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Contatos"}),e.jsx("p",{className:"text-gray-500 dark:text-zinc-400",children:"Gerencie sua lista de contatos para campanhas de marketing"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{variant:"secondary",onClick:()=>y(!0),children:[e.jsx(re,{className:"w-5 h-5 mr-2"}),"Importar"]}),e.jsxs(c,{variant:"secondary",onClick:Q,children:[e.jsx(le,{className:"w-5 h-5 mr-2"}),"Exportar"]}),e.jsxs(c,{onClick:()=>v(!0),children:[e.jsx(I,{className:"w-5 h-5 mr-2"}),"Adicionar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg",children:e.jsx(R,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:_.total}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Total"})]})]})}),e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/40 rounded-lg",children:e.jsx(ne,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:_.active}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Ativos"})]})]})}),e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg",children:e.jsx(ie,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:_.withOrders}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Com Pedidos"})]})]})}),e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/40 rounded-lg",children:e.jsx(oe,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:_.unsubscribed}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Descadastrados"})]})]})})]}),e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ce,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:d,onChange:a=>P(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Buscar por email, nome ou telefone..."})]}),e.jsxs("select",{value:k,onChange:a=>M(a.target.value),className:"px-4 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"Todos os status"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"unsubscribed",children:"Descadastrados"}),e.jsx("option",{value:"bounced",children:"Bounced"})]})]})}),e.jsx(j,{children:D.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(R,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:l.length===0?"Nenhum contato ainda":"Nenhum resultado"}),e.jsx("p",{className:"text-gray-500 dark:text-zinc-400 mb-4",children:l.length===0?"Adicione contatos para comeÃ§ar suas campanhas de marketing.":"Tente ajustar os filtros de busca."}),l.length===0&&e.jsxs(c,{onClick:()=>v(!0),children:[e.jsx(I,{className:"w-5 h-5 mr-2"}),"Adicionar Contato"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-black border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-zinc-400",children:"Contato"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-zinc-400",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-zinc-400",children:"Tags"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-zinc-400",children:"Pedidos"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500 dark:text-zinc-400",children:"AÃ§Ãµes"})]})}),e.jsx("tbody",{className:"divide-y",children:D.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-zinc-700 dark:bg-black",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.email}),a.name&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:a.name}),a.phone&&e.jsx("p",{className:"text-sm text-gray-400",children:a.phone})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${a.status==="active"?"bg-green-100 text-green-700":a.status==="unsubscribed"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:a.status==="active"?"Ativo":a.status==="unsubscribed"?"Descadastrado":"Bounced"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.tags?.slice(0,3).map(t=>e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-zinc-400 rounded text-xs",children:t},t)),a.tags&&a.tags.length>3&&e.jsxs("span",{className:"text-xs text-gray-400",children:["+",a.tags.length-3]})]})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("span",{className:"text-gray-900 dark:text-white",children:a.total_orders||0}),a.total_spent>0&&e.jsxs("span",{className:"text-sm text-gray-500 dark:text-zinc-400 ml-1",children:["(R$ ",a.total_spent.toFixed(2),")"]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>s("/marketing/email/new"),className:"p-1.5 text-gray-400 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Enviar email",children:e.jsx(G,{className:"w-5 h-5"})}),a.status==="active"&&e.jsx("button",{onClick:()=>X(a),className:"p-1.5 text-gray-400 hover:text-red-600 dark:text-red-400 hover:bg-red-50 rounded",title:"Descadastrar",children:e.jsx(de,{className:"w-5 h-5"})})]})})]},a.id))})]})})}),e.jsx(O,{isOpen:S,onClose:()=>v(!1),title:"Adicionar Contato",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:h.email,onChange:a=>w(t=>({...t,email:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"email@exemplo.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:h.name,onChange:a=>w(t=>({...t,name:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Nome do contato"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Telefone"}),e.jsx("input",{type:"tel",value:h.phone,onChange:a=>w(t=>({...t,phone:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(c,{variant:"secondary",onClick:()=>v(!1),children:"Cancelar"}),e.jsx(c,{onClick:H,disabled:C,children:C?"Salvando...":"Adicionar"})]})]})}),e.jsx(O,{isOpen:f,onClose:()=>y(!1),title:"Importar Contatos",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["Cole os contatos no formato: ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"email,nome,telefone"})," (um por linha)"]}),e.jsx("textarea",{value:r,onChange:a=>E(a.target.value),className:"w-full h-48 px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-primary-500 font-mono text-sm",placeholder:`joao@email.com,JoÃ£o Silva,11999999999
maria@email.com,Maria Santos
pedro@email.com`}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(c,{variant:"secondary",onClick:()=>y(!1),children:"Cancelar"}),e.jsx(c,{onClick:J,disabled:C,children:C?"Importando...":"Importar"})]})]})})]}):e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(R,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Nenhuma loja selecionada"}),e.jsx("p",{className:"text-gray-500 dark:text-zinc-400 mb-4",children:"Selecione uma loja para gerenciar contatos."}),e.jsx(c,{onClick:()=>s("/stores"),children:"Ver Lojas"})]})};export{ye as MarketingPage,Ne as SubscribersPage};
